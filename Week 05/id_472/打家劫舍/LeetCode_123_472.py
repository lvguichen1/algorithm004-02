#!/usr/bin/python
# -*- coding: utf-8 -*-
# @Time    : 2019/11/25
# @Author  : xujun
"""
买卖股票的最佳时机 III
给定一个数组，它的第 i 个元素是一支给定的股票在第 i 天的价格。

设计一个算法来计算你所能获取的最大利润。你最多可以完成 两笔 交易。

注意: 你不能同时参与多笔交易（你必须在再次购买前出售掉之前的股票）。

来源：力扣（LeetCode）
链接：https://leetcode-cn.com/problems/best-time-to-buy-and-sell-stock-iii
"""


class Solution:
    def maxProfit(self, prices) -> int:
        dp_i10, dp_i11 = 0, float("-inf")
        dp_i20, dp_i21 = 0, float("-inf")
        for price in prices:
            dp_i20 = max(dp_i20, dp_i21 + price)
            dp_i21 = max(dp_i21, dp_i10 - price)
            dp_i10 = max(dp_i10, dp_i11 + price)
            dp_i11 = max(dp_i11, -price)
        return dp_i20
